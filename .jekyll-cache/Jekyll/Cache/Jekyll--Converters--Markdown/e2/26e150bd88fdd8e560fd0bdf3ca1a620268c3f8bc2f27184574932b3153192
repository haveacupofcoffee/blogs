I"R<p>Allo, geeks and nerds. This is an introduction about how to run your
first CGI program with Python Web Server. Here I am using python3.
We all know ( Maybe you don’t know) the process below of creating a
CGI program and running it.</p>

<p>Create a folder called cgi-bin,  Here I put
it in the folder C:\Python\Python-web.</p>

<p><img src="/assets/images/2019-01-09/1.jpg" alt="" /></p>

<p>Create a file main.py, put it in the folder
cgi-bin, so the Absolute Path of this file is
C:\Python\Python-web\cgi-bin\mian.py.</p>

<p>source code of mian.py :</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="nb">print</span> <span class="p">(</span><span class="s2">"Content-type:text/html"</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">()</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;html&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;head&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;meta charset="utf-8"&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;title&gt;Hello Word - my first CGI Program&lt;/title&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;/head&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;body&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;h2&gt;Hello Word!&lt;/h2&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;/body&gt;'</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="s1">'&lt;/html&gt;'</span><span class="p">)</span></code></pre></figure>

<p>Open cmd shell, change the current directory to
C:\Python\Python-web as below :
<img src="/assets/images/2019-01-09/2.jpg" alt="" /></p>

<p>Then type python -m http.server –cgi 8002, start python web server.
(please install python3 first)
<img src="/assets/images/2019-01-09/3.jpg" alt="" /></p>

<p>Open a browser, type http://localhost:8002/cgi-bin/main.py
or http://127.0.0.1:8002/cgi-bin/main.py
<img src="/assets/images/2019-01-09/4.jpg" alt="" /></p>

<p>Bingo! You get it. Cool right? Have a cup of coffee and taste your victory.</p>

<p>After your coffee, lets think one step deeper. What do you think the
result would be if I do some changes here.</p>

<p>1)copy folder cgi-bin, name the copy as cgi, then change the current
directory to  C:\Python\Python-web in cmd shell, start the python
http.server, then run the porgram: http://localhost:8002/cgi/main.py</p>

<p>2)copy folder cgi-bin, name the copy as htbin, then change the
current directory to  C:\Python\Python-web in cmd shell, start
the python http.server, then run the porgram:
http://localhost:8002/htbin/main.py</p>

<p>3)change the current directory to  C:\Python\Python-web\cgi-bin in
cmd shell, start the python http.server, then run the program :
http://localhost:8002/htbin/main.py</p>

<p>4)create a new folder with name cgi( you can name it as what you
want)  under the folder cgi-bin, move the file main.py under the
folder cgi,  then change the current directory to  C:\Python\Python-web
in cmd shell, start thepython http.server, then run the porgram:
http://localhost:8002/cgi-bin/cgi/main.py</p>

<p>Does the coffee taste a litte bit bitter after your tried the
exmaples above?  Why does it show the source code of the mian.py
file in the browser for examples 1 and 3. Why example 2 and 4
are still right?</p>

<p>Well, Let us see what is happenning here.  When we run the command
python -m http.server –cgi 8002, acutally we were running the server.py
file provide by python3. This file is in the folder where you installed
python3. For me the file path is as below.
<img src="/assets/images/2019-01-09/5.jpg" alt="" /></p>

<p>Let’s open the file server.py, and search for /cgi-bin or /htbin,
we find a variable with name cgi-directories.
<img src="/assets/images/2019-01-09/6.jpg" alt="" /></p>

<p>Then we search cgi_directories, and find this:
<img src="/assets/images/2019-01-09/7.jpg" alt="" /></p>

<p>That’s why we need to start the python web server under the parent
folder of cgi-bin or htbin. The url could be in format
localhost:8002/cgi-bin/* or localhost:8002/htbin/*.</p>

<p>Okay. Now you know how to run your first simple CGI program with
python web server. Warm your coffee and Enjoy!</p>
:ET